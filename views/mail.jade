extends layout
block content
	div(class='container')
		ul(class='nav nav-pills',role="tablist")
			li(role="presentation",class="active")
				a(href="mail") Messages
					-var n = 0;
					each message in mail
						if !message.Read
							- n++;
					span(class="badge")=n
			li(role="presentation")
				a(href="compose") Compose

		div(class='jumbotron')
			each message in mail
				a(href="respond?_id=#{message._id}",class='list-group-item' id=message.From).btn.btn-primary reply
					div(class='container')
						div(class='col-md-10')
							h4(class='list-group-item-heading text-left')=message.From
							h5(class='list-group-item-heading text-left')=message.Subject
							- var len = message.Body.length - 1;
							- console.log(message.Body[len].id);
							p(class='list-group-item-text text-left')=message.Body[len].id
						div(class='col-md-2')
							if !message.Read
								span(class="badge") New

							//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset
							- var date = message.Date;
							- var currentTimeZoneOffsetinHours = -480;
							- console.log(currentTimeZoneOffsetinHours);
							- var offsetTime = new Date(date.getTime() + currentTimeZoneOffsetinHours * 60 * 1000);
							h5(class='list-group-item-text text-heading')=offsetTime.toLocaleDateString()
							h5(class='list-group-item-text text-heading')=offsetTime.toLocaleTimeString()